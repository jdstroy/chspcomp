"cHspComp ver.0.3.1" readme　（2005/8/17作成）

●目次

　・はじめに
　・動作確認環境
　・使用条件
　・アーカイブ内容
　・新バージョンでの変更点
　・利用上の注意
　・ソースのコンパイル方法
　・インストール
　・アンインストール
　・コマンドライン書式
　・スクリプト中に[起動オプション]文字列を埋め込む
　・更新履歴
　・開発環境、開発に利用したツール
　・作者について


●はじめに

　cHspCompは、コマンドラインランチャー、あるいはTeraPadなどのコマンドラインラン
　チャー機能付きのエディタからHSPスクリプトの実行／コンパイル／スクリプトからの
　実行ファイル作成を行うためのソフトです。ソースのみの形で公開しています。

　このソフトはコンソール・アプリケーションではありません。


●動作確認環境

　Windows XP Home Edition
　HSP 3.0

　　このソフトを使用するにはあらかじめHSP 3.0以降がインストールされている必要が
　　あります。


●使用条件

　・このソフトはいわゆるフリーウェアです。アーカイブの転載・再配布、添付スクリプ
　　トの改造・一部転用および成果物の配布は目的に関わらず自由です。
　・添付スクリプトを改変したもの、または改変したスクリプトを元にした成果物などを
　　配布する場合には、改変者ご自身の名前で公開するようにして下さい。
　・アーカイブ中のファイルを利用した結果については自己責任でお願いします。


●アーカイブ内容

　readme.txt　 ... このファイル
　*.hsp　　　　... cHspCompソース


●新バージョンでの変更点

　・オブジェクトファイルを直接実行したときに起動できないことがあるバグを修正。
　・一部無意味なオプションを廃止。
　・このreadmeに「利用上の注意」の項目を追加。
　・HSP 3.0で作成。


●利用上の注意

　・現在HSPのhspcmp.dllには、文法間違いを含むスクリプトをコンパイルしようとする
　　と、強制終了してしまうというバグがあるため、cHspCompではちょっと強引なコーデ
　　ィングでそれを回避しています。ご了承の上、cHspCompをお使い下さい。詳しくはソ
　　ースを参照して下さい。
　・現在HSPのアーカイブには、hsp3c.hrtランタイムを使用してのデバッグ実行を行うた
　　めの実行ファイル（hsp3.exeやhsp3cl.exeと同様のもの）が含まれていないため、標
　　準エディタから「#runtime "hsp3c"」という命令を含むスクリプトを実行しようとす
　　ると、「実行用ランタイムファイルが見つかりません。」というエラーが表示され実
　　行に失敗します。cHspCompでも同様の動作になりますのでご了承下さい。


●ソースのコンパイル方法

　HSP 3.0付属のスクリプトエディタで"main.hsp"を開き、[HSP]メニューの[実行ファイル
　自動作成]を実行。


●インストール

　ソースをコンパイルしてできるchspcomp.exeを、HSP3がインストールされているフォル
　ダ（=hsp3.exeがあるフォルダ）にコピーしてから、コマンドラインランチャーなどに
　登録。
　　　
　（バージョンアップ）
　インストール済みのchspcomp.exeを上書き。


●アンインストール

　HSPフォルダのchspcomp.exeと、同じ場所にchspcomp.exeが作成するchspcomp.txtを削除。


●コマンドライン書式

　【注】
　・[フルパス]に指定するスクリプトファイルの拡張子は必ず".as"か".hsp"である必要
　　があります。これ以外の拡張子のファイルはすべてオブジェクトファイルとみなされ
　　ます。
　・[フルパス]に半角スペースが含まれる場合は""で囲む。
　・[起動オプション]はHSP付属エディタの「起動オプション」ダイアログに入力する場合
　　と同じものを指定する。省略可。
　・chspcomp.exeへのオプションは[フルパス]より前でまとめて指定する。
　・実行ファイル作成は自動のみ。
　・作成されるオブジェクトファイルの中身は「実行ファイル自動作成」で作られるもの
　　と同じです。
　・実行ファイル、およびオブジェクトファイルはスクリプトがあるフォルダに作成され
　　ます。同名のファイルは上書きされます。


　■スクリプトのコンパイル＋実行

　　chspcomp.exe /hwid [スクリプトのフルパス] [起動オプション]
　　　（/h = 拡張マクロを使用せずにコンパイル　　　　　　　　　　）
　　　（/w = デバッグウィンドウ常時表示フラグを追加してコンパイル）
　　　（/i = デバッグ情報を追加してコンパイル　　　　　　　　　　）
　　　（/d = デバッグモードシンボル(_debug)を追加してコンパイル　）

　　●作成されるオブジェクトファイル名は"obj"固定です。

　　●コマンドプロンプトから起動する場合の入力例
　　　　（カレントフォルダにchspcomp.exeがある場合）

　　　chspcomp c:\test\scr.hsp
　　　chspcomp /wid "c:\test 1\scr.hsp" arg1
　　　chspcomp /h c:\test\scr.as "arg 2"


　■スクリプトのコンパイルのみ

　　chspcomp.exe /o [スクリプトのフルパス]
　　　（/o = "obj"という名前でコンパイル　　　　　　）
　　chspcomp.exe /c [スクリプトのフルパス]
　　　（/c = "(ファイル名).ax"という名前でコンパイル）
　　chspcomp.exe /s [スクリプトのフルパス]
　　　（/s = "start.ax"という名前でコンパイル　　　 ）

　　●上記3つのオプションは「コンパイルのみ」を行う場合にのみ、いずれか1つだけ指定
　　　して下さい。この他 /h,/w,/i,/d を同時に指定可。

　　●コマンドプロンプトから起動する場合の入力例
　　　　（カレントフォルダにchspcomp.exeがある場合）

　　　chspcomp /o c:\test\scr.hsp
　　　chspcomp /ch "c:\test 1\scr.hsp"
　　　chspcomp /swid c:\test\scr.as


　■オブジェクトファイル実行のみ

　　chspcomp.exe [オブジェクトファイルのフルパス] [起動オプション]

　　●デバッグウィンドウを表示させるには、コンパイルの時点で少なくとも/wオプション
　　　を指定しておく必要があります。

　　●コマンドプロンプトから起動する場合の入力例
　　　　（カレントフォルダにchspcomp.exeがある場合）

　　　chspcomp c:\test\obj
　　　chspcomp "c:\test 1\scr.ax" arg1
　　　chspcomp c:\test\start.ax "arg 1"


　■実行ファイル自動作成

　　chspcomp.exe /m [スクリプトのフルパス]
　　　（/m = 実行ファイル自動作成（必須））
　　chspcomp.exe /mh [スクリプトのフルパス]
　　　（/h = 拡張マクロを使用せずにコンパイル）

　　●デバッグ情報、デバッグ関連フラグは設定されません。

　　●コマンドプロンプトから起動する場合の入力例
　　　　（カレントフォルダにchspcomp.exeがある場合）

　　　chspcomp /m c:\test\scr.hsp
　　　chspcomp /mh "c:\test 1\scr.as"


　■最後に記録されたhspcmp.dllのメッセージを表示（=標準エディタの[エラー表示]）

　　chspcomp.exe /e
　　　（/e = （必須））

　　●コマンドプロンプトから起動する場合の入力例
　　　　（カレントフォルダにchspcomp.exeがある場合）

　　　chspcomp /e


　■HSPの予約キーワード一覧を表示

　　chspcomp.exe /k
　　　（/k = （必須））

　　●コマンドプロンプトから起動する場合の入力例
　　　　（カレントフォルダにchspcomp.exeがある場合）

　　　chspcomp /k


●スクリプト中に[起動オプション]文字列を埋め込む

　cHspCompからスクリプトを実行する場合にのみ、スクリプト中の特定の位置にあるコメント
　を[起動オプション]文字列として認識させることができます。
　
　[起動オプション]を埋め込むには、実行するスクリプトの1行目の先頭に「;! 」（半角
　スペースを忘れずに）で始まるコメントを記述して下さい。1行目の「;! 」以降の文字
　列がすべて[起動オプション]として認識されます。
　
　（例）
　　;! /e arg1 "arg 2"
　
　この方法で指定された[起動オプション]は、cHspComp起動時にコマンドラインで指定
　されるものよりも優先されます。


●更新履歴

　- ver.0.3.0での変更点 -

　　・HSP3 RC1以降専用に作り変え。
　　・コマンドラインの書式をかなり変更。
　　・HSP3 RC1で作成。

　- ver.0.2.0での変更点 -

　　・スクリプトの実行ができなかった不具合を修正。

　- ver.0.1.9での変更点 -

　　・HSP ver.2.61専用に作り変え。
　　・スクリプトをHSP CLで実行するためのコマンドラインオプションを追加。

　- ver.0.1.8での変更点 -

　　・コンパイルが正常に終了した場合にも、HSPCMP.DLLからのメッセージを保存するよ
　　　うにした。

　- ver.0.1.7での変更点 -

　　・既に作成されているオブジェクトファイル（"obj"）の実行のみを行う機能を追加。
　　・コンパイル（"obj"または"(スクリプトファイル名).ax"または"start.ax"作成）の
　　　みを行う機能を追加。
　　・一番最近に出力されたHSPCMP.DLLからのメッセージを再表示する機能を追加。
　　・履歴付き実行機能を追加。
　　・HSPキーワード一覧を表示する機能を追加。
　　・コンパイル時、HSP拡張マクロを使用しないようにする機能を追加。

　- ver.0.1.6での変更点 -

　　・スクリプト実行機能利用時、スクリプト中の特定の位置にあるコメントを[起動オプ
　　　ション]文字列として認識する機能を追加。
　　　　（「●スクリプト中に[起動オプション]文字列を埋め込む」を参照）

　- ver.0.1.5での変更点 -

　　・HSP CL ver.2.6b2にとりあえず対応。
　　・スクリプト実行機能利用時に「フルスクリーンモード」を指定するためのオプショ
　　　ンを追加。

　- ver.0.1.4での変更点 -

　　・スクリプト実行機能利用時に常にデバッグウィンドウを表示させるためのオプショ
　　　ンを追加。

　- ver.0.1.3での変更点 -

　　・ver.0.1.1、ver.0.1.2がWindows Meで正常に動作しない例を確認したため、Windows
　　　 Meでも動作する実行ファイルを同梱するようにした。

　- ver.0.1.2での変更点 -

　　・スクリプトに渡すオプション文字列を自分へのオプションとして処理してしまう不
　　　具合を修正。（それに伴いchspcomp.exeへのオプション入力ルールを若干変更）

　- ver.0.1.1での変更点 -

　　・コンパイルエラーが表示されるようにした。
　　・スクリプト実行機能利用時、オブジェクトファイル（start.ax）をhsp2.exeで実行
　　　することによって、詳しい実行時エラーとデバッグウィンドウが表示されるように
　　　した。


●開発環境、開発に利用したツール

　・Celeron 1.2GHz / 256MB RAM
　・Windows XP Home Edition SP1

　・HotSoupProcessor ver.3.0（おにたまさん作）
　　　http://hsp.tv/


●作者について

　ハンドル：chrono
　email: lldev●nifty.com（●を@に修正して下さい）
　http://homepage2.nifty.com/skitagawa/
